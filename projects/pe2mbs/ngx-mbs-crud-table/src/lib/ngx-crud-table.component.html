<div style="height: 100%;">
    <div class="table-header">
        <div class="title">Title</div>
        <div class="action">
            <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons (page)="onPageEvent( $event )"
                        aria-label="Select page of periodic elements">
            </mat-paginator>
            <div style="padding-top: 8px;">
                <button class="table-header-icon-button" (click)="onViewSettings( $event )" ><mat-icon>settings</mat-icon></button>
                <button class="table-header-icon-button" *ngIf="autoRefresh > 0" (click)="onAutoRefresh( $event )" ><mat-icon>history</mat-icon></button>
                <button class="table-header-icon-button" [disabled]="this.timerHandle !== undefined" (click)="refresh( $event )" ><mat-icon>refresh</mat-icon></button>
                <button class="table-header-icon-button" *ngFor="let hButton of headerButtons; let idx = index;" [disabled]="hButton.disabled" (click)="hButton.action( $event )" ><mat-icon>{{ hButton.icon }}</mat-icon></button>
            </div>
        </div>
    </div>
    <!-- TODO: Make sure that scrolling occurs when to many columns or rows -->
    <div class="table-container">
        <mat-table [dataSource]="dataSource" [tableResize]="resize" [widthColumns]="widthColumns" matSort (matSortChange)="onSortChange($event)">
            <ng-container *ngFor="let column of this.columns.slice( 0, this.columns.length - 1 ); let i = index" [matColumnDef]="column.field">
                <th mat-header-cell *matHeaderCellDef [width]="column.width">
                    <div style="display: flex; width: 100%;">
                        <div mat-sort-header [disabled]="!column.sort" style="flex-grow: 2;padding-top: 4px;">
                            {{ column.caption }}
                        </div>
                        <div *ngIf="column.filter" style="display: flex; flex-direction: row;">
                            <button class="simple-icon-button" matFilter [columnInfo]="column" (confirm)="onFilter( $event )" [filterColor]="filterColor">
                                <mat-icon style="font-size: 16px;padding-top: 4px;">settings</mat-icon>
                            </button>
                        </div>
                    </div>
                </th>
                <td *matCellDef="let row"> {{ row[ column.field ] }}  </td>
            </ng-container>
            <ng-container matColumnDef="options" stickyEnd>
                <th mat-header-cell *matHeaderCellDef>Options</th>
                <td mat-cell *matCellDef="let row" class="table-cells" style="display: flex; flex-direction: row;"> 
                    <button class="simple-icon-button" *ngFor="let action of this.columns[ this.columns.length - 1 ].buttons; let i = index" 
                                                        [disabled]="action.disabled" 
                                                        (click)="action.action( action, row )" ><mat-icon>{{ action.icon }}</mat-icon></button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </mat-table>
    </div>
    <div class="table-footer">
        FOOTER
    </div>
</div>